(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(14),o=t.n(c),a=t(3),u=t(4),i=t.n(u),d="/api/persons",s={getAll:function(){return i.a.get(d).then((function(e){return e.data}))},getPerson:function(e){return i.a.get("".concat(d,"/").concat(e)).then((function(e){return e.data}))},addPerson:function(e){return i.a.post(d,e).then((function(e){return e.data}))},updatePerson:function(e,n){return i.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return i.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.request.status}))}},l=(t(37),t(0)),h=function(e,n){return""===n?e:e.filter((function(e){return e.name.toLowerCase().search(n.toLowerCase())>=0}))},f=function(e){var n=e.msg;return null===n?null:Object(l.jsx)("div",{className:"error",children:n})},b=function(e){var n=e.msg;return null===n?null:Object(l.jsx)("div",{className:"success",children:n})},j=function(e){var n=e.value,t=e.handleChange;return Object(l.jsxs)("div",{children:["filter shown with",Object(l.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.handleSubmit,t=e.newName,r=e.newNumber,c=e.handleNameChange,o=e.handleNumberChange;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:c}),"number: ",Object(l.jsx)("input",{value:r,onChange:o})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.person;return Object(l.jsxs)("span",{children:[n.name," ",n.number," "]})},O=function(e){var n=e.deletePerson;return Object(l.jsx)("button",{onClick:n,children:"delete"})},v=function(e){var n=e.persons,t=e.deletePersonHandler;return Object(l.jsx)("ul",{children:n.map((function(e){return Object(l.jsxs)("li",{children:[Object(l.jsx)(p,{person:e}),Object(l.jsx)(O,{deletePerson:t(e.id)})]},e.name)}))})},x=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),u=Object(a.a)(o,2),i=u[0],d=u[1],p=Object(r.useState)(""),O=Object(a.a)(p,2),x=O[0],g=O[1],w=Object(r.useState)(""),k=Object(a.a)(w,2),P=k[0],C=k[1],N=Object(r.useState)(null),S=Object(a.a)(N,2),E=S[0],y=S[1],A=Object(r.useState)(null),D=Object(a.a)(A,2),F=D[0],I=D[1],H=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;I(e),setTimeout((function(){return I(null)}),n)},J=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;y(e),setTimeout((function(){return y(null)}),n)};return Object(r.useEffect)((function(){s.getAll().then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Search phonebook"}),Object(l.jsx)(f,{msg:E}),Object(l.jsx)(b,{msg:F}),Object(l.jsx)(j,{handleChange:function(e){C(e.target.value)},value:P}),Object(l.jsx)("h2",{children:"Add a new entry in phonebook"}),Object(l.jsx)(m,{handleSubmit:function(e){if(e.preventDefault(),-1!==t.findIndex((function(e){return e.name===i}))){var n=t.find((function(e){return e.name===i}));window.confirm("".concat(i," is already added to phonebook, replace the old number with new one?"))&&s.updatePerson(n.id,{name:i,number:x}).then((function(e){H("Updated ".concat(e.name," in phonebook")),c(t.map((function(t){return t.id!==n.id?t:e}))),d(""),g("")})).catch((function(e){return J("Failed: Error - ".concat(e))}))}else if(-1!==t.findIndex((function(e){return e.number===x}))){var r=t.find((function(e){return e.number===x}));window.confirm("".concat(x," is already added to phonebook, replace the old name with new name?"))&&s.updatePerson(r.id,{name:i,number:x}).then((function(e){H("Updated ".concat(e.number," in phonebook")),c(t.map((function(n){return n.id!==r.id?n:e}))),d(""),g("")})).catch((function(e){return J("Failed: Error - ".concat(e))}))}else s.addPerson({name:i,number:x}).then((function(e){H("Added ".concat(e.name," in phonebook")),c(t.concat(e)),d(""),g("")})).catch((function(e){return J("Failed: Error - ".concat(e))}))},newName:i,newNumber:x,handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){g(e.target.value)}}),Object(l.jsx)("h2",{children:"Phonebook Details"}),Object(l.jsx)(v,{persons:h(t,P),deletePersonHandler:function(e){return function(){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&s.deletePerson(e).then((function(r){204===r?(H("Deleted ".concat(n.name," from phonebook")),c(t.filter((function(n){return n.id!==e})))):(J("Error deleting the contact: server responded with status code ".concat(r)),c(t.filter((function(n){return n.id!==e}))))})).catch((function(n){J("Error connection to server: ".concat(n)),c(t.filter((function(n){return n.id!==e})))}))}}})]})};o.a.render(Object(l.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f552ac7f.chunk.js.map