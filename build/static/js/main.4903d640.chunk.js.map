{"version":3,"sources":["services/phonebook.js","App.js","index.js"],"names":["baseUrl","phonebook","getAll","axios","get","then","response","data","getPerson","id","addPerson","info","post","updatePerson","put","deletePerson","delete","res","request","status","filterPersons","persons","searchParam","filter","person","name","toLowerCase","search","ErrorMessage","msg","className","SuccessMessage","Filter","value","handleChange","onChange","PersonForm","handleSubmit","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","PersonDetails","number","PersonDelete","onClick","PhonebookDetails","deletePersonHandler","map","App","useState","setPersons","setNewName","setNewNumber","newSearch","setNewSearch","errorMsg","setErrorMsg","successMsg","setSuccessMsg","setSuccessMsgWrapper","clearTime","setTimeout","setErrorMsgWrapper","useEffect","pb","catch","err","console","log","e","target","preventDefault","findIndex","personDetails","find","p","window","confirm","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4903d640.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const res = axios.get(baseUrl);\n    return res.then(response => response.data)\n}\n\nconst getPerson = (id) => {\n    const res = axios.get(`${baseUrl}/${id}`);\n    return res.then(response => response.data);\n}\n\nconst addPerson = (info) => {\n    const res = axios.post(baseUrl, info);\n    return res.then(response => response.data);\n}\n\nconst updatePerson = (id, info) => {\n    const res = axios.put(`${baseUrl}/${id}`, info);\n    return res.then(response => response.data);\n}\n\nconst deletePerson = (id) => {\n    return axios.delete(`${baseUrl}/${id}`).then(res => res.request.status);\n}\n\nconst phonebook = {\n    getAll: getAll, \n    getPerson: getPerson, \n    addPerson: addPerson, \n    updatePerson: updatePerson, \n    deletePerson: deletePerson\n}\n\nexport default phonebook","import React, { useState, useEffect } from 'react'\nimport pb from './services/phonebook'\nimport './index.css'\n\nconst filterPersons = (persons, searchParam) => {\n  if (searchParam === \"\") {\n    return persons\n  } else {\n    return persons.filter((person) => {\n      return person.name.toLowerCase().search(searchParam.toLowerCase()) >= 0 ? true : false\n    });\n  }\n}\n\nconst ErrorMessage = ({ msg }) => {\n  if (msg === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {msg}\n    </div>\n  )\n}\n\n\nconst SuccessMessage = ({ msg }) => {\n  if (msg === null) {\n    return null\n  }\n  return (\n    <div className=\"success\">\n      {msg}\n    </div>\n  )\n}\n\nconst Filter = ({ value, handleChange}) => (\n  <div>filter shown with \n      <input value={value} onChange={handleChange}/>\n  </div>\n)\n\nconst PersonForm = ({ handleSubmit, newName, newNumber, handleNameChange, handleNumberChange }) => (\n  <form onSubmit={handleSubmit}>\n    <div>\n      name: <input value={newName} onChange={handleNameChange} />\n      number: <input value={newNumber} onChange={handleNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nconst PersonDetails = ({ person }) => (\n  <span>{person.name} {person.number} </span>\n)\n\nconst PersonDelete = ({deletePerson}) => <button onClick={deletePerson}>delete</button>\n\nconst PhonebookDetails = ({ persons, deletePersonHandler }) => (\n  <ul>\n    {persons.map(person => {\n      return (\n        <li key={person.name}>\n        <PersonDetails person={person} />\n        <PersonDelete deletePerson={deletePersonHandler(person.id)} />\n        </li>\n      )\n    })\n    }\n  </ul>\n)\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newSearch, setNewSearch] = useState('');\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [successMsg, setSuccessMsg] = useState(null);\n\n  const setSuccessMsgWrapper = (msg, clearTime = 3000) => {\n    setSuccessMsg(msg);\n    setTimeout(() => setSuccessMsg(null), clearTime);\n  }\n\n  const setErrorMsgWrapper = (msg, clearTime = 3000) => {\n    setErrorMsg(msg);\n    setTimeout(() => setErrorMsg(null), clearTime);\n  }\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (persons.findIndex(person => person.name === newName) !== -1) {\n      let personDetails = persons.find(p => p.name === newName)\n      let res = window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`);\n      if (res) {\n        pb.updatePerson(personDetails.id, { name: newName, number: newNumber }).then(res => {\n          setSuccessMsgWrapper(`Updated ${res.name} in phonebook`);\n          setPersons(persons.map(p => p.id !== personDetails.id ? p : res));\n          setNewName('');\n          setNewNumber('');\n        }).catch(err => {setErrorMsgWrapper(`Failed: Error - ${err}`);});\n      }\n    } else if (persons.findIndex(person => person.number === newNumber) !== -1) {\n      let personDetails = persons.find(p => p.number === newNumber)\n      let res = window.confirm(`${newNumber} is already added to phonebook, replace the old name with new name?`);\n      if (res) {\n        pb.updatePerson(personDetails.id, { name: newName, number: newNumber }).then(res => {\n          setSuccessMsgWrapper(`Updated ${res.number} in phonebook`);\n          setPersons(persons.map(p => p.id !== personDetails.id ? p : res));\n          setNewName('');\n          setNewNumber('');\n        }).catch(err => {setErrorMsgWrapper(`Failed: Error - ${err}`);});\n      }\n    } else {\n      pb.addPerson({ name: newName, number: newNumber }).then(res => {\n        setSuccessMsgWrapper(`Added ${res.name} in phonebook`);\n        setPersons(persons.concat(res));\n        setNewName('');\n        setNewNumber('');\n      }).catch(err => {\n\t      setErrorMsgWrapper(`Failed: Error - ${err}`);\n      });\n    }\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  }\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  }\n  const handleSearchChange = (e) => {\n    setNewSearch(e.target.value);\n  }\n\n  const handlePersonDelete = (id) => {\n    return () => {\n      let person = persons.find(p => p.id === id);\n      if (window.confirm(`Delete ${person.name} ?`)) {\n        pb.deletePerson(id).then(res => {\n          if (res === 204) {\n            setSuccessMsgWrapper(`Deleted ${person.name} from phonebook`)\n            setPersons(persons.filter(p => p.id !== id))\n          } else {\n            setErrorMsgWrapper(`Error deleting the contact: server responded with status code ${res}`);\n            setPersons(persons.filter(p => p.id !== id))\n          }\n        }).catch(err => {\n          setErrorMsgWrapper(`Error connection to server: ${err}`);\n          setPersons(persons.filter(p => p.id !== id))\n        })\n      }\n    }\n  }\n\n  const initPersons = () => {\n    pb.getAll().then(res => {\n      setPersons(res);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n  useEffect(initPersons, []);\n\n  return (\n    <div>\n      <h2>Search phonebook</h2>\n      <ErrorMessage msg={errorMsg} />\n      <SuccessMessage msg={successMsg} />\n      <Filter handleChange={handleSearchChange} value={newSearch}/>\n      <h2>Add a new entry in phonebook</h2>\n      <PersonForm \n      handleSubmit={handleSubmit}\n      newName={newName}\n      newNumber={newNumber}\n      handleNameChange={handleNameChange}\n      handleNumberChange={handleNumberChange}\n      />\n      <h2>Phonebook Details</h2>\n      <PhonebookDetails persons={filterPersons(persons, newSearch)} deletePersonHandler={handlePersonDelete} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}